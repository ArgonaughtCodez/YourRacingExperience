<% include partials/header %>

<div class="welcomeBanner">
    <h1 class="welcomeH1 text-center"> Welcome to Your<span>Racing</span>Experience </h1> 
</div>

<div class="errorDiv" style="width: 90%; margin: 10px auto; ">
  <% if(error && error.length > 0){ %>
    <div class="alert alert-danger" role="alert"><%= error %></div>
  <% } %>
  
  <% if(success && success.length > 0){ %>
    <div class="alert alert-success" role="alert"><%= success %></div>
  <% } %>
</div>

<% if(count <= perPage){ %>

  
  
<% } else { %>  
<div class="row text-center">
    <% if (pages && pages > 0) { %>
    <ul class="pagination text-center">
        <% if (current == 1) { %>
        <li class="disabled"><a>First</a></li>
        <% } else { %>
        <li><a href="/">First</a></li>
        <% } %>
 
        <% if (current == 1) { %>
        <li class="disabled"><a>«</a></li>
        <% } else { %>
        <li><a href="/?page=<%= Number(current) - 1 %>">«</a></li>
        <% } %>
 
        <% var i = (Number(current) > 5 ? Number(current) - 4 : 1) %>
        <% if (i !== 1) { %>
        <li class="pageNumberGrp disabled"><a>...</a></li>
        <% } %>
        <% for (; i <= (Number(current) + 4) && i <= pages; i++) { %>
        <% if (i == current) { %>
        <li class="active"><a><%= i %></a></li>
        <% } else { %>
        <li><a class="pageNumberGrp" href="/?page=<%= i %>"><%= i %></a></li>
        <% } %>
        <% if (i == Number(current) + 4 && i < pages) { %>
        <li class="pageNumberGrp disabled"><a>...</a></li>
        <% } %>
        <% } %>
 
        <% if (current == pages) { %>
        <li class="disabled"><a>»</a></li>
        <% } else { %>
        <li><a href="/?page=<%= Number(current) + 1 %>">»</a></li>
        <% } %>
 
        <% if (current == pages) { %>
        <li class="disabled"><a>Last</a></li>
        <% } else { %>
        <li><a href="/?page=<%= pages %>">Last</a></li>
        <% } %>
    </ul>
    <% } %>
</div>
<% } %>
<div class="row" style="display:flex; flex-wrap: wrap;">

<% for (var i = 0; i < posts.length; i++){ %>
  
            <a href="/post/<%= posts[i]._id %>" type="button" class="thumbnail postLinks"
                      style="background:url(<%= posts[i].resizedImage %>); 
                      background-repeat: no-repeat;
                      background-position: center;
                      background-size:cover;
                      border-radius: 0 !important;
                      outline: 0 !important;"
            ></a>
<% }%>
</div>

<% if(count <= perPage){ %>

  
  
<% } else { %>  
<div class="row text-center">
    <% if (pages && pages > 0) { %>
    <ul class="pagination text-center">
        <% if (current == 1) { %>
        <li class="disabled"><a>First</a></li>
        <% } else { %>
        <li><a href="/">First</a></li>
        <% } %>
 
        <% if (current == 1) { %>
        <li class="disabled"><a>«</a></li>
        <% } else { %>
        <li><a href="/?page=<%= Number(current) - 1 %>">«</a></li>
        <% } %>
 
        <% var i = (Number(current) > 5 ? Number(current) - 4 : 1) %>
        <% if (i !== 1) { %>
        <li class="pageNumberGrp disabled"><a>...</a></li>
        <% } %>
        <% for (; i <= (Number(current) + 4) && i <= pages; i++) { %>
        <% if (i == current) { %>
        <li class="active"><a><%= i %></a></li>
        <% } else { %>
        <li><a class="pageNumberGrp" href="/?page=<%= i %>"><%= i %></a></li>
        <% } %>
        <% if (i == Number(current) + 4 && i < pages) { %>
        <li class="pageNumberGrp disabled"><a>...</a></li>
        <% } %>
        <% } %>
 
        <% if (current == pages) { %>
        <li class="disabled"><a>»</a></li>
        <% } else { %>
        <li><a href="/?page=<%= Number(current) + 1 %>">»</a></li>
        <% } %>
 
        <% if (current == pages) { %>
        <li class="disabled"><a>Last</a></li>
        <% } else { %>
        <li><a href="/?page=<%= pages %>">Last</a></li>
        <% } %>
    </ul>
    <% } %>
</div>
<% } %>

</div>
</body>
</html>